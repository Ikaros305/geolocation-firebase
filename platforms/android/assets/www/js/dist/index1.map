{"version":3,"sources":["disconnected.js","markers.js","userId.js","map.js","socket.js","checkformsubmited.js","socketConnectionCheck.js","formhandle.js","success.js","handledisconnect.js","geolocationUpdate.js","cordova-background.js","index1.js"],"names":["module","exports","disconnectedMessage","message","div","document","getElementsByClassName","style","display","classList","remove","add","innerText","setTimeout","markersarray","initialLocation","userId","Math","floor","random","id","idtostring2","String","initMap","center","lat","lng","map","google","maps","Map","getElementById","zoom","db","collection","onSnapshot","changes","snapshot","docChanges","forEach","change","type","doc","data","marker","Marker","icon","content","name","disableAutoPan","InfoWindow","setPosition","set","push","docId","socket","io","connect","socketId","nameOfUser","spinners","serverDownAlert","getElementsByTagName","body","serverDownCheck","on","form","delete","then","setMap","ConnectionUp","splice","length","socketid","idtostring","formdiv","addEventListener","handleform","e","value","height","accuracy","preventDefault","alertMessage","contains","handleDisconnect","where","disconnetId","get","docs","showPosition","position","update","coords","latitude","longitude","onError","error","alert","code","background","navigator","geolocation","getCurrentPosition","enableHighAccuracy","cordova","plugins","backgroundMode","enable","interval","onactivate","disableWebViewOptimizations","setInterval","ondeactivate","clearInterval","num"],"mappings":"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","file":"index1.map","sourceRoot":"..","sourcesContent":["module.exports = {\r\n  disconnectedMessage: function (message) {\r\n    var div = document.getElementsByClassName('success-hide');\r\n    div[0].style.display = \"block\";\r\n    div[0].classList.remove('alert-primary');\r\n    div[0].classList.add('alert-danger');\r\n    div[0].innerText = message;\r\n    setTimeout(function(){ \r\n      div[0].style.display = \"none\";\r\n     }, 8000);\r\n  }\r\n}","module.exports = {\r\n  markersarray: [],\r\n  initialLocation: []\r\n}","userId = function () {\r\n    userId = Math.floor((Math.random() * 10000000000000000000) + 1);\r\n    return userId;\r\n}\r\n    module.exports = {\r\n      id: userId()\r\n    }","import {\r\n  markersarray\r\n} from './markers';\r\nimport {\r\n  id\r\n} from './userId';\r\nvar idtostring2 = String(id);\r\n\r\nmodule.exports = {\r\n  initMap: function () {\r\n    var center = {\r\n      lat: 51.507351,\r\n      lng: -0.127758\r\n    };\r\n\r\n    // Create a map object and specify the DOM element\r\n    // for display.\r\n    var map = new google.maps.Map(document.getElementById('map'), {\r\n      center: center,\r\n      zoom: 11\r\n    });\r\n    // getting data from database\r\n    db.collection('geolocation').onSnapshot(snapshot => {\r\n      let changes = snapshot.docChanges();\r\n      changes.forEach(change => {\r\n        if (change.type == 'added') {\r\n          if (change.doc.data().userId == idtostring2) {\r\n            // Create a marker and set its position.\r\n            var marker = new google.maps.Marker({\r\n              icon: './img/map-icon.png',\r\n              content: change.doc.data().name,\r\n              disableAutoPan: true,\r\n              map: map,\r\n            })\r\n          } else {\r\n            // Create a marker and set its position.\r\n            var marker = new google.maps.InfoWindow({\r\n              content: change.doc.data().name,\r\n              disableAutoPan: true,\r\n              map: map,\r\n            })\r\n          }\r\n\r\n          marker.setPosition({\r\n            lat: change.doc.data().lat,\r\n            lng: change.doc.data().lng\r\n          });\r\n          marker.set('id', change.doc.id);\r\n          marker.set('userId', idtostring2);\r\n          markersarray.push(marker);\r\n        } else if (change.type == 'modified') {\r\n          // get modified id of document\r\n          var docId = change.doc.id\r\n          markersarray.forEach(marker => {\r\n            if (marker.id == docId) {\r\n              // update location\r\n              marker.setPosition({\r\n                lat: change.doc.data().lat,\r\n                lng: change.doc.data().lng\r\n              });\r\n            }\r\n          })\r\n        }\r\n      });\r\n    })\r\n  }\r\n}","module.exports = {\r\n  socket: io.connect('https://geolocation-comunit.herokuapp.com'),\r\n  socketId: []\r\n}\r\n// https://geolocation-comunit.herokuapp.com/\r\n","module.exports = {\r\n  nameOfUser: []\r\n}","import {\r\n  socket\r\n} from './socket';\r\nimport {\r\n  id\r\n} from './userId';\r\nimport socketId from './socket';\r\nimport { nameOfUser } from './checkformsubmited';\r\nimport { markersarray } from './markers';\r\n\r\nlet spinners = document.getElementsByClassName('main-bg');\r\nlet serverDownAlert = document.getElementsByClassName('serverdownalert');\r\ndocument.getElementsByTagName('form#form');\r\nlet body = document.getElementsByTagName('body');\r\nvar idtostring2 = String(id);\r\n\r\n\r\nmodule.exports = {\r\n  // check if server down\r\n  serverDownCheck: socket.on('connect_error', function () {\r\n    serverDownAlert[0].style.display = 'block';\r\n    body[0].classList.add('spinner-1');\r\n    form.style.display = 'none';\r\n    serverDownAlert[0].innerText = 'No internet connection can be found!';\r\n    db.collection(\"onlineusers\").doc(socketId.socketId[0]).delete().then(function () {})\r\n    db.collection(\"geolocation\").doc(idtostring2).delete().then(function () {})\r\n    markersarray.forEach(marker => {\r\n      if (marker.id === idtostring2) {\r\n        marker.setMap(null);\r\n      }\r\n    });\r\n  }),\r\n\r\n  ConnectionUp: socket.on('connect', function () {\r\n    body[0].classList.remove('spinner-1');\r\n    form.style.display = 'block';\r\n    serverDownAlert[0].style.display = 'none';\r\n    socketId.socketId.splice(0,socketId.socketId.length);\r\n    socketId.socketId.push(socket.id);\r\n    db.collection(\"onlineusers\").doc(socket.id).set({\r\n      userId: idtostring2,\r\n      socketid: socket.id\r\n    }).then(function () {\r\n      if (nameOfUser.length == 1) {\r\n        db.collection(\"geolocation\").doc(idtostring2).set({\r\n          name: nameOfUser[\"0\"],\r\n          lat: 51.507351,\r\n          lng: -0.127758,\r\n          userId: idtostring2\r\n        })\r\n      }\r\n    })\r\n  })\r\n}","import { disconnectedMessage } from './disconnected';\r\nimport { initMap } from './map';\r\nimport { id } from './userId';\r\nimport markersarray from './markers';\r\nimport { socket } from './socket';\r\nimport { serverDownCheck, ConnectionUp } from './socketConnectionCheck';\r\nimport { nameOfUser } from './checkformsubmited';\r\n\r\nvar idtostring = String(id);\r\n\r\nlet form = document.getElementById('form');\r\nlet formdiv = document.getElementById('main-bg');\r\n\r\nform.addEventListener('submit', handleform)\r\n\r\nfunction handleform(e) {\r\n  let name = document.getElementById('name').value;\r\n  nameOfUser.push(name);\r\n  // remove main main-bg\r\n  formdiv.style.display = \"none\";\r\n  // set map height\r\n  document.getElementById('map').style.height = '100%';\r\n  // save user in database with initizlized lat and lng\r\n  db.collection(\"geolocation\").doc(idtostring).set({\r\n    name: name,\r\n    lat: 51.507351,\r\n    lng: -0.127758,\r\n    accuracy: 0,\r\n    userId: idtostring\r\n  })\r\n  // initilize map\r\n  initMap()\r\n  e.preventDefault();\r\n}","import {\r\n  nameOfUser\r\n} from './checkformsubmited';\r\n\r\nmodule.exports = {\r\n  alertMessage: function (message) {\r\n    // if statement to avoid alert message showing on first screen\r\n    if (nameOfUser.length === 0) {\r\n      //if form not submitted this will take care of it and won't show any alert\r\n    } else {\r\n      var div = document.getElementsByClassName('success-hide');\r\n      if (div[0].classList.contains('alert-danger')) {\r\n        div[0].classList.remove('alert-danger');\r\n        div[0].classList.add('alert-primary');\r\n      }\r\n      div[0].style.display = \"block\";\r\n      div[0].innerText = message;\r\n      setTimeout(function () {\r\n        div[0].style.display = \"none\";\r\n      }, 8000);\r\n    }\r\n  }\r\n}","import { markersarray } from './markers';\r\nimport { socket } from './socket';\r\nimport { disconnectedMessage } from './disconnected';\r\nmodule.exports = {\r\n  handleDisconnect:\r\n  socket.on('disconnectId', function (data) {\r\n    db.collection('onlineusers').where('socketid', '==', data.disconnetId).get().then((snapshot) => {\r\n      snapshot.docs.forEach(doc => {\r\n        markersarray.forEach(marker => {\r\n          if (marker.id == doc.data().userId) {\r\n            marker.setMap(null);\r\n            disconnectedMessage(marker.content + ' Disconnected');\r\n          }\r\n        });\r\n      });\r\n    });\r\n  })\r\n}","import {\r\n  id\r\n} from './userId';\r\nvar idtostring = String(id);\r\nmodule.exports = {\r\n  showPosition:\r\n    //  update it main functionality\r\n    function showPosition(position) {\r\n      // find user by userId\r\n      db.collection('geolocation').where('userId', '==', idtostring).get().then((snapshot) => {\r\n        snapshot.docs.forEach(doc => {\r\n          const userId = doc.id;\r\n          // update location \r\n          db.collection('geolocation').doc(userId).update({\r\n            lat: position.coords.latitude,\r\n            lng: position.coords.longitude\r\n          });\r\n        });\r\n      });\r\n    },\r\n\r\n  onError: function onError(error) {\r\n    alert('code: ' + error.code + '\\n' +\r\n      'message: ' + error.message + '\\n');\r\n  }\r\n}","import { id } from './userId';\r\nvar idtostring = String(id);\r\nimport onError from './geolocationUpdate';\r\nmodule.exports = {\r\n  background: function() {\r\n    // Get Location\r\n    navigator.geolocation.getCurrentPosition(showPosition, onError, { enableHighAccuracy: true });\r\n    function showPosition(position) {\r\n        // find user by userId\r\n    db.collection('geolocation').where('userId', '==', idtostring).get().then((snapshot) => {\r\n      snapshot.docs.forEach(doc => {\r\n        const userId = doc.id;\r\n        // update location \r\n        db.collection('geolocation').doc(userId).update({\r\n          lat: position.coords.latitude,\r\n          lng: position.coords.longitude\r\n        });\r\n      });\r\n    });\r\n    }\r\n  }\r\n}","import formhandle from './formhandle';\r\nimport {\r\n  alertMessage\r\n} from './success';\r\nimport {\r\n  id\r\n} from './userId';\r\nimport socket from './socket';\r\nimport {\r\n  handledisconnect\r\n} from './handledisconnect';\r\nimport {\r\n  showPosition, onError\r\n} from './geolocationUpdate';\r\nimport {\r\n  background\r\n} from './cordova-background';\r\n\r\ndocument.addEventListener('deviceready', function () {\r\n  // Enable background mode\r\n  cordova.plugins.backgroundMode.enable();\r\n\r\n  var interval = null;\r\n  // Called when background mode has been activated\r\n  cordova.plugins.backgroundMode.onactivate = function () {\r\n    cordova.plugins.backgroundMode.disableWebViewOptimizations();\r\n    interval = setInterval(function () {\r\n      background();\r\n    }, 1000);\r\n  }\r\n\r\n  cordova.plugins.backgroundMode.ondeactivate = function () {\r\n    clearInterval(interval)\r\n  };\r\n}, false);\r\n\r\n// get position of user every 2 seconds\r\nif (navigator.geolocation) {\r\n  setInterval(function () {\r\n    navigator.geolocation.getCurrentPosition(showPosition, onError, { enableHighAccuracy: true });\r\n  }, 1000);\r\n} else {\r\n  alert('Geolocation is not supported by this browser.');\r\n}\r\n\r\ndb.collection('geolocation').onSnapshot(snapshot => {\r\n  let num = snapshot.docs.length\r\n  let changes = snapshot.docChanges();\r\n  if (changes.length > 1) {\r\n    changes.forEach(change => {\r\n      if (change.type == 'added') {\r\n        if (change.doc.data().userId == id == false) {\r\n          alertMessage(num + ' Joined In');\r\n        }\r\n      }\r\n    })\r\n  } else {\r\n    changes.forEach(change => {\r\n      if (change.type == 'added') {\r\n        if (change.doc.data().userId == id == false) {\r\n          alertMessage(change.doc.data().name + ' Joined In');\r\n        }\r\n      }\r\n    })\r\n  }\r\n})"]}